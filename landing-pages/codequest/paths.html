<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeQuest - Choose Your Path</title>
    <link rel="stylesheet" href="styles/main.css">
    <style>
        .paths-page {
            min-height: 100vh;
            padding: 100px 5% 120px;
            position: relative;
            z-index: 10;
        }

        .paths-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .paths-header h1 {
            font-family: var(--font-pixel);
            font-size: clamp(20px, 4vw, 36px);
            color: var(--neon-cyan);
            text-shadow: 4px 4px 0 var(--neon-pink);
            margin-bottom: 15px;
        }

        .paths-header p {
            font-family: var(--font-retro);
            font-size: 22px;
            color: var(--text-secondary);
        }

        .paths-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        .path-card {
            background: #16213e;
            border: 4px solid;
            padding: 0;
            position: relative;
            transition: var(--transition-normal);
            overflow: visible;
        }

        .path-card::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 8px;
            right: -8px;
            bottom: -8px;
            border: 4px solid var(--neon-cyan);
            z-index: 0;
            pointer-events: none;
            transition: var(--transition-normal);
        }

        .path-card > * {
            position: relative;
            z-index: 1;
        }

        .path-card:hover {
            transform: translate(4px, 4px);
        }

        .path-card:hover::before {
            transform: translate(-4px, -4px);
        }

        .path-card.locked {
            opacity: 0.6;
            filter: grayscale(50%);
        }

        .path-card.locked:hover {
            transform: none;
        }

        .path-card-header {
            padding: 30px;
            text-align: center;
            border-bottom: 3px solid rgba(255,255,255,0.1);
        }

        .path-icon {
            font-size: 60px;
            margin-bottom: 15px;
            display: block;
        }

        .path-name {
            font-family: var(--font-pixel);
            font-size: 16px;
            color: white;
            margin-bottom: 5px;
        }

        .path-fullname {
            font-family: var(--font-retro);
            font-size: 18px;
            color: var(--text-muted);
        }

        .path-card-body {
            padding: 25px 30px;
        }

        .path-desc {
            font-family: var(--font-retro);
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .path-languages {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .path-lang {
            background: rgba(255,255,255,0.1);
            padding: 5px 12px;
            font-family: var(--font-retro);
            font-size: 14px;
            color: var(--neon-cyan);
            border: 1px solid var(--neon-cyan);
        }

        .path-progress {
            margin-bottom: 20px;
        }

        .path-progress-bar {
            height: 15px;
            background: rgba(255,255,255,0.1);
            border: 2px solid var(--neon-yellow);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .path-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-yellow), var(--neon-green));
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .path-progress-text {
            font-family: var(--font-retro);
            font-size: 16px;
            color: var(--text-muted);
            text-align: right;
        }

        .path-card-footer {
            padding: 20px 30px;
            border-top: 3px solid rgba(255,255,255,0.1);
        }

        .path-btn {
            width: 100%;
            padding: 15px;
            font-family: var(--font-pixel);
            font-size: 12px;
            text-align: center;
            text-transform: uppercase;
            transition: var(--transition-fast);
            display: block;
        }

        .path-btn-play {
            background: var(--neon-pink);
            color: white;
            border: none;
        }

        .path-btn-play:hover {
            background: var(--neon-cyan);
        }

        .path-btn-locked {
            background: transparent;
            color: var(--text-muted);
            border: 2px solid var(--text-muted);
            cursor: not-allowed;
        }

        .path-requirement {
            font-family: var(--font-retro);
            font-size: 14px;
            color: var(--neon-yellow);
            text-align: center;
            margin-top: 10px;
        }

        .lock-icon {
            font-size: 24px;
            display: block;
            margin-bottom: 5px;
        }

        @media (max-width: 480px) {
            .paths-page {
                padding-bottom: 100px;
            }

            .path-card-header {
                padding: 20px;
            }

            .path-icon {
                font-size: 48px;
            }

            .path-name {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="scanlines"></div>
    <div class="grid-floor"></div>

    <!-- Navigation -->
    <nav class="nav">
        <a href="index.html" class="nav-logo">CODEQUEST</a>
        <ul class="nav-links">
            <li><a href="paths.html">Paths</a></li>
            <li><a href="leaderboard.html">Leaderboard</a></li>
            <li><a href="profile.html">Profile</a></li>
        </ul>
        <div class="nav-right">
            <div class="nav-xp">
                <span class="nav-level">LVL 1</span>
                <div class="nav-xp-bar">
                    <div class="nav-xp-fill" style="width: 0%"></div>
                </div>
            </div>
        </div>
        <div class="nav-hamburger" onclick="toggleMobileNav()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
        <span class="mobile-nav-close" onclick="toggleMobileNav()">&times;</span>
        <ul class="mobile-nav-links">
            <li><a href="paths.html">Paths</a></li>
            <li><a href="leaderboard.html">Leaderboard</a></li>
            <li><a href="profile.html">Profile</a></li>
        </ul>
    </div>
    <div class="nav-overlay" id="navOverlay" onclick="toggleMobileNav()"></div>

    <!-- Paths Page -->
    <main class="paths-page">
        <div class="paths-header">
            <h1>Choose Your Path</h1>
            <p>>> Select a career path to begin your journey</p>
        </div>

        <div class="paths-grid" id="pathsGrid">
            <!-- Paths will be dynamically generated -->
        </div>
    </main>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav">
        <div class="bottom-nav-items">
            <a href="index.html" class="bottom-nav-item">
                <span class="bottom-nav-icon">üè†</span>
                <span class="bottom-nav-label">Home</span>
            </a>
            <a href="paths.html" class="bottom-nav-item active">
                <span class="bottom-nav-icon">üó∫Ô∏è</span>
                <span class="bottom-nav-label">Paths</span>
            </a>
            <a href="profile.html" class="bottom-nav-item">
                <span class="bottom-nav-icon">üë§</span>
                <span class="bottom-nav-label">Profile</span>
            </a>
            <a href="leaderboard.html" class="bottom-nav-item">
                <span class="bottom-nav-icon">üèÜ</span>
                <span class="bottom-nav-label">Ranks</span>
            </a>
        </div>
    </nav>

    <script src="scripts/game.js"></script>
    <script src="scripts/lessons.js"></script>
    <script>
        function toggleMobileNav() {
            document.getElementById('mobileNav').classList.toggle('active');
            document.getElementById('navOverlay').classList.toggle('active');
        }

        function renderPaths() {
            const player = CodeQuest.loadPlayer();
            const grid = document.getElementById('pathsGrid');
            const paths = LessonData.getAllPaths();

            grid.innerHTML = paths.map(path => {
                const isUnlocked = LessonData.isPathUnlocked(player, path.id);
                const progress = CodeQuest.getPathProgress ?
                    player.completedLessons[path.id]?.length || 0 : 0;
                const percentage = Math.floor((progress / path.totalLessons) * 100);

                let requirementText = '';
                if (!isUnlocked && path.requires) {
                    const reqs = Object.entries(path.requires)
                        .map(([p, n]) => `${LessonData.paths[p].name}: ${n} lessons`)
                        .join(', ');
                    requirementText = `<div class="path-requirement">üîí Requires: ${reqs}</div>`;
                }

                return `
                    <div class="path-card ${isUnlocked ? '' : 'locked'}" style="border-color: ${path.color}">
                        <div class="path-card-header">
                            <span class="path-icon">${path.icon}</span>
                            <div class="path-name">${path.name}</div>
                            <div class="path-fullname">${path.fullName}</div>
                        </div>
                        <div class="path-card-body">
                            <p class="path-desc">${path.description}</p>
                            <div class="path-languages">
                                ${path.languages.map(lang => `<span class="path-lang">${lang}</span>`).join('')}
                            </div>
                            <div class="path-progress">
                                <div class="path-progress-bar">
                                    <div class="path-progress-fill" style="width: ${percentage}%"></div>
                                </div>
                                <div class="path-progress-text">${progress}/${path.totalLessons} Lessons</div>
                            </div>
                        </div>
                        <div class="path-card-footer">
                            ${isUnlocked ? `
                                <a href="path-webdev.html?path=${path.id}" class="path-btn path-btn-play">
                                    ${progress > 0 ? 'Continue' : 'Start'}
                                </a>
                            ` : `
                                <div class="path-btn path-btn-locked">
                                    <span class="lock-icon">üîí</span>
                                    Locked
                                </div>
                                ${requirementText}
                            `}
                        </div>
                    </div>
                `;
            }).join('');
        }

        document.addEventListener('DOMContentLoaded', () => {
            const player = CodeQuest.init();
            CodeQuest.updateUI(player);
            renderPaths();
        });
    </script>
</body>
</html>
